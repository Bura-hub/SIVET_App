# Dockerfile para el frontend React
FROM node:18-alpine

# Establecer directorio de trabajo
WORKDIR /app

# Copiar archivos de dependencias
COPY package*.json ./

# Instalar dependencias
RUN npm ci --only=production

# Copiar c贸digo fuente
COPY . .

# Construir la aplicaci贸n para producci贸n
RUN npm run build

# Instalar servidor web ligero
RUN npm install -g serve

# Crear usuario no-root
RUN addgroup -g 1001 -S nodejs
RUN adduser -S nextjs -u 1001

# Cambiar propietario de archivos
RUN chown -R nextjs:nodejs /app
USER nextjs

# Exponer puerto
EXPOSE 3000

# Comando para servir la aplicaci贸n
CMD ["serve", "-s", "build", "-l", "3000"]
